<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Wavee.WinUI.Views.Shell"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TitleBar
            Title="Wavee"
            IsBackButtonVisible="True"
            IsPaneToggleButtonVisible="False"
            Subtitle="Preview">
            <TitleBar.IconSource>
                <ImageIconSource ImageSource="ms-appx:///Assets/Icons/Icon_Light.png" />
            </TitleBar.IconSource>
            <TitleBar.Content>
                <AutoSuggestBox
                    Width="360"
                    VerticalAlignment="Center"
                    PlaceholderText="Search.."
                    QueryIcon="Find" />
            </TitleBar.Content>
            <TitleBar.RightHeader>
                <Button
                    Padding="0"
                    Background="Transparent"
                    BorderThickness="0"
                    CornerRadius="0">
                    <PersonPicture
                        Width="30"
                        Height="30"
                        Initials="{x:Bind App.ViewModel.UserInitials, Mode=OneWay}" />

                    <Button.Flyout>
                        <MenuFlyout Placement="BottomEdgeAlignedRight">
                            <MenuFlyoutItem IsEnabled="False" Text="{x:Bind App.ViewModel.Username, Mode=OneWay}" />
                            <MenuFlyoutSeparator />
                            <MenuFlyoutItem Command="{x:Bind App.ViewModel.LogoutCommand}" Text="Logout">
                                <MenuFlyoutItem.Icon>
                                    <FontIcon Glyph="&#xE7E8;" />
                                    <!--  SignOut icon  -->
                                </MenuFlyoutItem.Icon>
                            </MenuFlyoutItem>
                        </MenuFlyout>
                    </Button.Flyout>
                </Button>
            </TitleBar.RightHeader>
        </TitleBar>
        <NavigationView
            x:Name="NavView"
            Grid.Row="1"
            IsBackButtonVisible="Collapsed"
            IsPaneOpen="{x:Bind ViewModel.IsPaneOpen, Mode=TwoWay}"
            IsPaneToggleButtonVisible="True"
            IsSettingsVisible="False"
            ItemInvoked="OnNavigationViewItemInvoked"
            OpenPaneLength="{x:Bind ViewModel.OpenPaneLength, Mode=TwoWay}"
            PaneDisplayMode="Left"
            SelectedItem="{x:Bind ViewModel.SelectedItem, Mode=TwoWay}">

            <NavigationView.MenuItems>
                <NavigationViewItem Content="Home" Tag="Home">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE80F;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  PropertySizer for resizable NavigationView pane  -->
                <controls:PropertySizer
                    Grid.Column="0"
                    HorizontalAlignment="Left"
                    Binding="{x:Bind ViewModel.OpenPaneLength, Mode=TwoWay}"
                    Foreground="Transparent"
                    Maximum="440"
                    Minimum="52"
                    Visibility="{x:Bind ViewModel.IsPaneOpen, Mode=OneWay}" />

                <!--  Navigation Frame  -->
                <Frame x:Name="ContentFrame" Grid.Column="1" />
            </Grid>
        </NavigationView>
    </Grid>
</Page>
