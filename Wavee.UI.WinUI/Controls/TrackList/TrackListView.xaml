<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="Wavee.UI.WinUI.Controls.TrackList.TrackListView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:contracts="using:Wavee.UI.WinUI.Data.Contracts"
    xmlns:ui="using:CommunityToolkit.WinUI"
    xmlns:media="using:CommunityToolkit.WinUI.Media"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:behaviors="using:Wavee.UI.WinUI.Behaviors"
    mc:Ignorable="d">

    <UserControl.Resources>
        <!-- Card shadow for rows -->
        <media:AttachedCardShadow x:Key="RowShadow" Offset="0,1" BlurRadius="4" Opacity="0.08" CornerRadius="6"/>
    </UserControl.Resources>

    <Grid>
        <!-- Main ListView with scrollable header -->
        <ListView
            x:Name="InternalListView"
            SelectionMode="Extended"
            IsItemClickEnabled="True"
            ItemClick="TrackItem_Click"
            SelectionChanged="TrackListView_SelectionChanged"
            ContainerContentChanging="TrackListView_ContainerContentChanging"
            Padding="16,0,18,0">

            <!-- Scrollable Header: Page Header + Column Headers -->
            <ListView.Header>
                <StackPanel>
                    <!-- Page-specific Header Content -->
                    <ContentPresenter x:Name="HeaderContentPresenter" Content="{x:Bind HeaderContent, Mode=OneWay}"/>

                    <!-- Column Headers (scrolls with page header initially) -->
                    <Grid x:Name="ScrollableColumnHeaders" Padding="8,0,8,0" Margin="0,0,0,8" Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="40"/>
                            <ColumnDefinition x:Name="ArtColumnDef" Width="48"/>
                            <ColumnDefinition Width="*" MinWidth="120"/>
                            <ColumnDefinition x:Name="ArtistColumnDef" Width="180"/>
                            <ColumnDefinition x:Name="AlbumColumnDef" Width="180"/>
                            <ColumnDefinition x:Name="AddedColumnDef" Width="120"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="#" Style="{StaticResource CaptionTextBlockStyle}"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>

                        <!-- Title (sortable) -->
                        <Button Grid.Column="2"
                                Command="{x:Bind ViewModel.SortByCommand, Mode=OneWay}"
                                CommandParameter="Title"
                                Background="Transparent"
                                BorderThickness="0"
                                Padding="12,8,8,8"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left">
                            <StackPanel Orientation="Horizontal" Spacing="4">
                                <TextBlock Text="Title" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <FontIcon Glyph="{x:Bind ViewModel.SortChevronGlyph, Mode=OneWay}"
                                          FontSize="10"
                                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                          Visibility="{x:Bind ViewModel.IsSortingByTitle, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                            </StackPanel>
                        </Button>

                        <!-- Artist (sortable) -->
                        <Button x:Name="ArtistHeaderScrollable" Grid.Column="3"
                                Command="{x:Bind ViewModel.SortByCommand, Mode=OneWay}"
                                CommandParameter="Artist"
                                Background="Transparent"
                                BorderThickness="0"
                                Padding="0,8,8,8"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left">
                            <StackPanel Orientation="Horizontal" Spacing="4">
                                <TextBlock Text="Artist" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <FontIcon Glyph="{x:Bind ViewModel.SortChevronGlyph, Mode=OneWay}"
                                          FontSize="10"
                                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                          Visibility="{x:Bind ViewModel.IsSortingByArtist, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                            </StackPanel>
                        </Button>

                        <!-- Album (sortable) -->
                        <Button x:Name="AlbumHeaderScrollable" Grid.Column="4"
                                Command="{x:Bind ViewModel.SortByCommand, Mode=OneWay}"
                                CommandParameter="Album"
                                Background="Transparent"
                                BorderThickness="0"
                                Padding="0,8,8,8"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left">
                            <StackPanel Orientation="Horizontal" Spacing="4">
                                <TextBlock Text="Album" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <FontIcon Glyph="{x:Bind ViewModel.SortChevronGlyph, Mode=OneWay}"
                                          FontSize="10"
                                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                          Visibility="{x:Bind ViewModel.IsSortingByAlbum, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                            </StackPanel>
                        </Button>

                        <!-- Date Added (sortable) -->
                        <Button x:Name="AddedHeaderScrollable" Grid.Column="5"
                                Command="{x:Bind ViewModel.SortByCommand, Mode=OneWay}"
                                CommandParameter="AddedAt"
                                Background="Transparent"
                                BorderThickness="0"
                                Padding="0,8,8,8"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left">
                            <StackPanel Orientation="Horizontal" Spacing="4">
                                <TextBlock Text="Date Added" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <FontIcon Glyph="{x:Bind ViewModel.SortChevronGlyph, Mode=OneWay}"
                                          FontSize="10"
                                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                          Visibility="{x:Bind ViewModel.IsSortingByAddedAt, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                            </StackPanel>
                        </Button>

                        <TextBlock Grid.Column="6" Text="Duration" Style="{StaticResource CaptionTextBlockStyle}"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                   HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,8"/>
                    </Grid>
                </StackPanel>
            </ListView.Header>

            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem" BasedOn="{StaticResource DefaultListViewItemStyle}">
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="0,2"/>
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="MinHeight" Value="0"/>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <ItemsStackPanel ItemsUpdatingScrollMode="KeepScrollOffset" />
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="contracts:ITrackItem">
                    <Border
                        Padding="8,8"
                        CornerRadius="6"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        ui:Effects.Shadow="{StaticResource RowShadow}"
                        PointerEntered="Row_PointerEntered"
                        PointerExited="Row_PointerExited">
                        <Grid ColumnSpacing="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="48"/>
                                <ColumnDefinition Width="*" MinWidth="120"/>
                                <ColumnDefinition Width="180"/>
                                <ColumnDefinition Width="180"/>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>

                            <!-- Row number / Play button area -->
                            <Grid Grid.Column="0">
                                <TextBlock x:Name="RowIndex"
                                           Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"/>
                                <Button x:Name="PlayButton"
                                        Visibility="Collapsed"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Padding="0"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Click="PlayButton_Click">
                                    <FontIcon Glyph="&#xE768;" FontSize="14" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                                </Button>
                            </Grid>

                            <!-- Album thumbnail (40x40) -->
                            <Border Grid.Column="1" Width="40" Height="40" CornerRadius="4"
                                    Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}">
                                <Grid>
                                    <FontIcon Glyph="&#xE8D6;" FontSize="16" Opacity="0.3"
                                              HorizontalAlignment="Center" VerticalAlignment="Center"
                                              Visibility="{x:Bind ImageUrl, Converter={StaticResource InverseNullToVisibilityConverter}}"/>
                                    <Image Source="{x:Bind ImageUrl, Converter={StaticResource StringToImageSourceConverter}}"
                                           Stretch="UniformToFill"
                                           Visibility="{x:Bind ImageUrl, Converter={StaticResource NullToVisibilityConverter}}"
                                           behaviors:ImageFallbackBehavior.HideOnError="True"
                                           behaviors:ImageFallbackBehavior.FadeInOnLoad="True"
                                           behaviors:ImageFallbackBehavior.DecodePixelWidth="80"/>
                                </Grid>
                            </Border>

                            <!-- Title -->
                            <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="6" Margin="12,0,8,0" VerticalAlignment="Center">
                                <TextBlock Text="{x:Bind Title}"
                                           TextTrimming="CharacterEllipsis"
                                           MaxLines="1"/>
                                <Border Visibility="{x:Bind IsExplicit, Converter={StaticResource BoolToVisibilityConverter}}"
                                        Background="{ThemeResource TextFillColorSecondaryBrush}"
                                        CornerRadius="2"
                                        Padding="4,1"
                                        VerticalAlignment="Center">
                                    <TextBlock Text="E" FontSize="9" FontWeight="Bold"
                                               Foreground="{ThemeResource SolidBackgroundFillColorBaseBrush}"/>
                                </Border>
                            </StackPanel>

                            <!-- Artist (clickable) -->
                            <HyperlinkButton Grid.Column="3"
                                             Content="{x:Bind ArtistName}"
                                             Tag="{x:Bind ArtistId}"
                                             Click="ArtistLink_Click"
                                             Padding="0"
                                             VerticalAlignment="Center">
                                <HyperlinkButton.ContentTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}"
                                                   Style="{StaticResource CaptionTextBlockStyle}"
                                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                   TextTrimming="CharacterEllipsis"
                                                   MaxLines="1"/>
                                    </DataTemplate>
                                </HyperlinkButton.ContentTemplate>
                            </HyperlinkButton>

                            <!-- Album (clickable) -->
                            <HyperlinkButton Grid.Column="4"
                                             Content="{x:Bind AlbumName}"
                                             Tag="{x:Bind AlbumId}"
                                             Click="AlbumLink_Click"
                                             Padding="0"
                                             VerticalAlignment="Center">
                                <HyperlinkButton.ContentTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}"
                                                   Style="{StaticResource CaptionTextBlockStyle}"
                                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                   TextTrimming="CharacterEllipsis"
                                                   MaxLines="1"/>
                                    </DataTemplate>
                                </HyperlinkButton.ContentTemplate>
                            </HyperlinkButton>

                            <!-- Date Added (placeholder - will be set via attached property or converter) -->
                            <TextBlock x:Name="DateAddedText" Grid.Column="5"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                       VerticalAlignment="Center"/>

                            <!-- Duration -->
                            <TextBlock Grid.Column="6"
                                       Text="{x:Bind DurationFormatted}"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                       HorizontalAlignment="Right"
                                       VerticalAlignment="Center"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <!-- Sticky Column Headers Overlay (appears when original scrolls out of view) -->
        <Border x:Name="StickyColumnHeaders"
                VerticalAlignment="Top"
                Visibility="Collapsed"
                CornerRadius="8"
                Padding="2"
                BorderThickness="0"
                Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}">
            <Grid Padding="24,0,24,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition x:Name="StickyArtColumnDef" Width="48"/>
                    <ColumnDefinition Width="*" MinWidth="120"/>
                    <ColumnDefinition x:Name="StickyArtistColumnDef" Width="180"/>
                    <ColumnDefinition x:Name="StickyAlbumColumnDef" Width="180"/>
                    <ColumnDefinition x:Name="StickyAddedColumnDef" Width="120"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="#" Style="{StaticResource CaptionTextBlockStyle}"
                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                           HorizontalAlignment="Center" VerticalAlignment="Center"/>

                <!-- Title (sortable) -->
                <Button Grid.Column="2"
                        Command="{x:Bind ViewModel.SortByCommand, Mode=OneWay}"
                        CommandParameter="Title"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="12,8,8,8"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Left">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="Title" Style="{StaticResource CaptionTextBlockStyle}"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <FontIcon Glyph="{x:Bind ViewModel.SortChevronGlyph, Mode=OneWay}"
                                  FontSize="10"
                                  Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                  Visibility="{x:Bind ViewModel.IsSortingByTitle, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    </StackPanel>
                </Button>

                <!-- Artist (sortable) -->
                <Button x:Name="StickyArtistHeader" Grid.Column="3"
                        Command="{x:Bind ViewModel.SortByCommand, Mode=OneWay}"
                        CommandParameter="Artist"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="0,8,8,8"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Left">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="Artist" Style="{StaticResource CaptionTextBlockStyle}"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <FontIcon Glyph="{x:Bind ViewModel.SortChevronGlyph, Mode=OneWay}"
                                  FontSize="10"
                                  Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                  Visibility="{x:Bind ViewModel.IsSortingByArtist, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    </StackPanel>
                </Button>

                <!-- Album (sortable) -->
                <Button x:Name="StickyAlbumHeader" Grid.Column="4"
                        Command="{x:Bind ViewModel.SortByCommand, Mode=OneWay}"
                        CommandParameter="Album"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="0,8,8,8"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Left">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="Album" Style="{StaticResource CaptionTextBlockStyle}"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <FontIcon Glyph="{x:Bind ViewModel.SortChevronGlyph, Mode=OneWay}"
                                  FontSize="10"
                                  Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                  Visibility="{x:Bind ViewModel.IsSortingByAlbum, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    </StackPanel>
                </Button>

                <!-- Date Added (sortable) -->
                <Button x:Name="StickyAddedHeader" Grid.Column="5"
                        Command="{x:Bind ViewModel.SortByCommand, Mode=OneWay}"
                        CommandParameter="AddedAt"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="0,8,8,8"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Left">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <TextBlock Text="Date Added" Style="{StaticResource CaptionTextBlockStyle}"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <FontIcon Glyph="{x:Bind ViewModel.SortChevronGlyph, Mode=OneWay}"
                                  FontSize="10"
                                  Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                  Visibility="{x:Bind ViewModel.IsSortingByAddedAt, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    </StackPanel>
                </Button>

                <TextBlock Grid.Column="6" Text="Duration" Style="{StaticResource CaptionTextBlockStyle}"
                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                           HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,8"/>
            </Grid>
        </Border>

        <!-- Loading Overlay -->
        <Grid x:Name="LoadingOverlay" Background="{ThemeResource LayerFillColorDefaultBrush}" Visibility="Collapsed">
            <ProgressRing IsActive="True" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Grid>

        <!-- Empty State -->
        <ContentPresenter x:Name="EmptyStatePresenter"
                          Content="{x:Bind EmptyStateContent, Mode=OneWay}"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          Visibility="Collapsed"/>

        <!-- Selection Command Bar (appears when tracks selected) -->
        <Border x:Name="SelectionCommandBarBorder"
                VerticalAlignment="Bottom"
                CornerRadius="8,8,0,0"
                Margin="0,0,0,0"
                Visibility="Collapsed">
            <Border.Background>
                <AcrylicBrush TintColor="{ThemeResource LayerFillColorDefault}"
                              TintOpacity="0.9"
                              FallbackColor="{ThemeResource LayerFillColorDefault}"/>
            </Border.Background>
            <controls:TabbedCommandBar x:Name="SelectionCommandBar">
                <controls:TabbedCommandBar.MenuItems>
                    <controls:TabbedCommandBarItem x:Name="SelectionCommandBarItem">
                        <AppBarButton Icon="{ui:FontIcon Glyph=&#xE768;}"
                                      Label="Play selected"
                                      Command="{x:Bind ViewModel.PlaySelectedCommand, Mode=OneWay}"/>
                        <AppBarButton Icon="{ui:FontIcon Glyph=&#xE768;}"
                                      Label="Play after"
                                      Command="{x:Bind ViewModel.PlayAfterCommand, Mode=OneWay}"/>
                        <AppBarButton Icon="{ui:FontIcon Glyph=&#xE90B;}"
                                      Label="Add to queue"
                                      Command="{x:Bind ViewModel.AddSelectedToQueueCommand, Mode=OneWay}"/>
                        <AppBarSeparator/>
                        <AppBarButton Icon="{ui:FontIcon Glyph=&#xE710;}"
                                      Label="Add to playlist">
                            <AppBarButton.Flyout>
                                <MenuFlyout x:Name="AddToPlaylistFlyout"
                                            Placement="TopEdgeAlignedLeft"
                                            Opening="AddToPlaylistFlyout_Opening">
                                    <MenuFlyoutItem Text="New playlist..."
                                                    Icon="{ui:FontIcon Glyph=&#xE710;}"
                                                    Click="NewPlaylist_Click"/>
                                    <MenuFlyoutSeparator x:Name="PlaylistSeparator" Visibility="Collapsed"/>
                                    <!-- Playlist items added dynamically in code-behind -->
                                </MenuFlyout>
                            </AppBarButton.Flyout>
                        </AppBarButton>
                        <AppBarButton x:Name="RemoveButton"
                                      Icon="{ui:FontIcon Glyph=&#xE74D;}"
                                      Command="{x:Bind ViewModel.RemoveSelectedCommand, Mode=OneWay}"/>
                    </controls:TabbedCommandBarItem>
                </controls:TabbedCommandBar.MenuItems>
            </controls:TabbedCommandBar>
        </Border>

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState x:Name="Wide">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="1100"/>
                    </VisualState.StateTriggers>
                </VisualState>
                <VisualState x:Name="Medium">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="800"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="AddedColumnDef.Width" Value="0"/>
                        <Setter Target="AddedHeaderScrollable.Visibility" Value="Collapsed"/>
                        <Setter Target="StickyAddedColumnDef.Width" Value="0"/>
                        <Setter Target="StickyAddedHeader.Visibility" Value="Collapsed"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="Narrow">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="600"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="AddedColumnDef.Width" Value="0"/>
                        <Setter Target="AddedHeaderScrollable.Visibility" Value="Collapsed"/>
                        <Setter Target="AlbumColumnDef.Width" Value="0"/>
                        <Setter Target="AlbumHeaderScrollable.Visibility" Value="Collapsed"/>
                        <Setter Target="StickyAddedColumnDef.Width" Value="0"/>
                        <Setter Target="StickyAddedHeader.Visibility" Value="Collapsed"/>
                        <Setter Target="StickyAlbumColumnDef.Width" Value="0"/>
                        <Setter Target="StickyAlbumHeader.Visibility" Value="Collapsed"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="VeryNarrow">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="AddedColumnDef.Width" Value="0"/>
                        <Setter Target="AddedHeaderScrollable.Visibility" Value="Collapsed"/>
                        <Setter Target="AlbumColumnDef.Width" Value="0"/>
                        <Setter Target="AlbumHeaderScrollable.Visibility" Value="Collapsed"/>
                        <Setter Target="ArtistColumnDef.Width" Value="0"/>
                        <Setter Target="ArtistHeaderScrollable.Visibility" Value="Collapsed"/>
                        <Setter Target="StickyAddedColumnDef.Width" Value="0"/>
                        <Setter Target="StickyAddedHeader.Visibility" Value="Collapsed"/>
                        <Setter Target="StickyAlbumColumnDef.Width" Value="0"/>
                        <Setter Target="StickyAlbumHeader.Visibility" Value="Collapsed"/>
                        <Setter Target="StickyArtistColumnDef.Width" Value="0"/>
                        <Setter Target="StickyArtistHeader.Visibility" Value="Collapsed"/>
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</UserControl>
